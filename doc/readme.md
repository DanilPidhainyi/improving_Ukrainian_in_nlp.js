# Пояснювальна записка

## Зміст
1. [Вступ](#l1)<br>
   1.1. [Мета](#l11)<br>
   1.2. [Контекст](#l12)<br>
2. [Технічне завдання](#l2)<br>
   2.1. [Загальне завдання](#l21)<br>
   2.2. [Функціональність системи](#l22)<br>
3. [Проектування](#l3)<br>
   3.1. [Діаграма юзкейсів](#l31)<br>
   3.2. [Сценарії для користувача](#l32)<br>
   3.3. [Інтерфейс](#l33)<br>
4. [Розробка](#l4)<br>
   4.1. [Основна структура проекту](#l41)<br>
   4.2. [Документація](#l42)<br>
5. [Тестування](#l5)<br>
6. [Висновки](#l6)<br>
7. [Джерела](#l7)<br>

## <a name="l1">1. Вступ</a>

Цей документ є пояснювальною запискою до проекту з курсу ІПЗ та містить опис вимог та процесу розробки рекомендаційної системи.

### <a name="l11">1.1. Мета</a>

Метою пояснювальної записки є визначення основних вимог до функціональності та експлуатаційної придатності, визначення бізнес-правил і можливих технологічних обмежень предмета розробки.

### <a name="l12">1.2. Контекст</a>

Вимоги, які зазначені у цьому документі, є основою технічного завдання проекту.

## <a name="l2">2. Технічне завдання</a>

### <a name="l21">2.1. Загальне завдання</a>

Розробити чат-бота в Telegram, що надає користувачу можливість збирати та аналізувати дані з відкритих груп.

### <a name="l22">2.2. Функціональність системи</a>

Користувач системи повинен мати можливості:
- завантажувати всі пости у зручному форматі.
- налаштовувати часовий діапазон аналізу.
- виводити графік активності групи.
- аналізувати отримані дані влаштованими інструментами.

## <a name="l3">3. Проектування</a>

### <a name="l31">3.1. Діаграма юзкейсів</a>

![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/main.puml)
 
### <a name="l32">3.2. Сценарії для користувача </a>

***ID:*** UC_1
    
***НАЗВА:*** Ініціалізація лінку телеграм
    
***УЧАСНИКИ:*** Користувач, система

***ПЕРЕДУМОВИ:*** Користувач ввів /start

***РЕЗУЛЬТАТ:*** Система готова до збору та аналізу даних

***ВИКЛЮЧНІ СИТУАЦІЇ:*** 
- Введений користувачем лінк не є дійсним


**ОСНОВНИЙ СЦЕНАРІЙ:*** 

![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/uc1.puml)


***ID:*** UC_2
    
***НАЗВА:*** Створення графіку активності групи
    
***УЧАСНИКИ:*** Користувач, система

***ПЕРЕДУМОВИ:*** Користувач вибрав Chart of posts history

***РЕЗУЛЬТАТ:*** Система надала очікувані дані
***ВИКЛЮЧНІ СИТУАЦІЇ:*** 
- Відсутні

**ОСНОВНИЙ СЦЕНАРІЙ:*** 
                                                                 
![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/uc2.puml)

***ID:*** UC_3
    
***НАЗВА:*** Завантаження всієї історії постів групи
    
***УЧАСНИКИ:*** Користувач, система

***ПЕРЕДУМОВИ:*** Користувач вибрав Full posts history

***РЕЗУЛЬТАТ:*** Система надала очікувані дані
***ВИКЛЮЧНІ СИТУАЦІЇ:*** 
- Відсутні

**ОСНОВНИЙ СЦЕНАРІЙ:*** 

![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/uc3.puml)

***ID:*** UC_4
    
***НАЗВА:*** Найпопулярніший пост групи
    
***УЧАСНИКИ:*** Користувач, система

***ПЕРЕДУМОВИ:*** Користувач вибрав The most viewed post

***РЕЗУЛЬТАТ:*** Система надала очікувані дані
***ВИКЛЮЧНІ СИТУАЦІЇ:*** 
- Відсутні

**ОСНОВНИЙ СЦЕНАРІЙ:*** 

![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/uc4.puml)

***ID:*** UC_5
    
***НАЗВА:*** Визначення часового діапазону аналізу даних
    
***УЧАСНИКИ:*** Користувач, система

***ПЕРЕДУМОВИ:*** /calendar_start /calendar_end

***РЕЗУЛЬТАТ:*** Система надала очікувані дані
***ВИКЛЮЧНІ СИТУАЦІЇ:*** 
- Відсутні

**ОСНОВНИЙ СЦЕНАРІЙ:*** 

![uml](http://www.plantuml.com/plantuml/proxy?cache=no&src=https://raw.githubusercontent.com/greg-source/statistic-online/master/doc/uml/uc5.puml)

### <a name="l33">3.3. Інтерфейс</a>

**Сторінка входу**

![interface](img/start.png)

**Ініціалізація групи та вивід функціоналу**

![interface](img/link.png)

**Respond to full message history**
Отриманий файл
![interface](img/history_1.png)
Вміст файлу
![interface](img/history_2.png)

**Respond to chart of message history**

![interface](img/chart.png)

**Respond to the most viewed post**

![interface](img/tmvpost.png)

**Функціонал виставлення дат аналізу**

![interface](img/calendar1.png)
![interface](img/calendar2.png)


## <a name="l4">4. Розробка</a>

Основний перелік біліотек, що було використано при розробці:
- python-telegram-bot - основний інтерфейс та функціонал чат-бота. 
- telethon - запити та збір інформації.
- sqlite3 - робота з базою даних.
- matplotlib - створення графічних зображень.
- xlsxwriter - створення файлів розширення xlsx.

### <a name="l41">4.1. Основна структура проекту</a>

1. Інтерфейс, основні функції та налаштування чат-бота.

- *Виконав: Грициняк Григорій*

Основу створено за допомогою [Bot API](https://core.telegram.org/bots/api)  - це інтерфейс на основі HTTP, створений для розробників, які прагнуть створювати ботів для Telegram.

Токен для доступу до API HTTP було сгенеровано за допомогою @BotFather. 

Було розроблено систему(Bot.py), за допомогою якої бот коректно реагує на запити користувача, розуміє на якій стадії знаходиться 
користувач, і відповідає на команди та повідомлення відповідно до запитів.

2. Запити та збір інформації.

- *Виконав: Калашніков Ілля*

Інтернет може похвалитися величезним набором ресурсів, розміщених на різних серверах. 
Щоб ви могли отримати доступ до цих ресурсів, ваш браузер повинен мати можливість відправляти 
запит на сервери та відображати ресурси для вас. HTTP (Hypertext Transfer Protocol) - 
основний формат, який використовується для структурування запитів та відповідей для 
ефективного спілкування між клієнтом та сервером. 
Повідомлення, яке клієнт надсилає на сервер, називається запитом HTTP. 
Коли ці запити надсилаються, клієнти можуть використовувати різні методи.
Telethon - бібліотека призначена для спрощення написання програм Python, які можуть взаємодіяти з Telegram. 
Було розроблено модуль(Requests.py), функції якого відповідають за запити та збір інформації, 
коректне сортування.

Проведена робота по налаштуванні багатопоточність проекту.

3. Бази даних, обробка даних, тестова частина.

- *Виконав: Гречаний Євгеній*

Розроблена база даних(Database.py), яка створює нове поле в залежності від користувача, зберігає його
дані та основні налаштування. 

Розроблена система обробки даних(Charts.py), що обробляє надані дані, та повертає їх у
запитаному вигляді(графік або таблиця).


### <a name="l42">4.2. Документація</a>

За допомогою pydoc було розроблено документацію коду, яку можна переглянути за [посиланням](https://htmlpreview.github.io/?https://github.com/greg-source/statistic-online/blob/master/doc/pydoc/index.html)


## <a name="l5">5. Тестування</a>

Тести виконано за допомогою середовища тестування pytest

Test complete!

Test complete!

Process finished with exit code 0

## <a name="l6">6. Висновки</a>

В результаті виконання лабораторних робіт з курсу ІПЗ було розроблено чат-бот, що повністю відповідає технічному завдані.

## <a name="l7">7. Джерела</a>

- https://core.telegram.org/bots/api
- https://github.com/python-telegram-bot/python-telegram-bot
- https://docs.telethon.dev/en/latest/
- https://docs.python.org/3/library/sqlite3.html
- https://docs.python.org/3/library/asyncio.html

